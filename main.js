(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t){r(e,t),t.add(e)}function n(e,t,n){r(e,t),t.set(e,n)}function r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,u(e,t,"get"))}function a(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,u(e,t,"set"),n),n}function u(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var c=new WeakMap,l=new WeakMap,s=new WeakMap,p=new WeakMap,f=new WeakMap,h=new WeakMap,d=new WeakSet,y=new WeakSet,v=new WeakSet,w=new WeakSet,b=function(){function r(e,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t(this,w),t(this,v),t(this,y),t(this,d),n(this,c,{writable:!0,value:void 0}),n(this,l,{writable:!0,value:void 0}),n(this,s,{writable:!0,value:void 0}),n(this,p,{writable:!0,value:void 0}),n(this,f,{writable:!0,value:void 0}),n(this,h,{writable:!0,value:void 0}),a(this,c,document.querySelector(o)),a(this,s,e.name),a(this,p,e.link),a(this,h,i)}var u,b;return u=r,(b=[{key:"generateCard",value:function(){return a(this,l,o(this,d,m).call(this)),a(this,f,i(this,l).querySelector(".places__image")),i(this,l).querySelector(".places__title").textContent=i(this,s),i(this,f).src=i(this,p),i(this,f).alt=i(this,s),o(this,w,_).call(this),i(this,l)}}])&&e(u.prototype,b),Object.defineProperty(u,"prototype",{writable:!1}),r}();function m(){return i(this,c).cloneNode(!0).content}function g(e){e.target.classList.toggle("places__like-button_active")}function k(e){e.target.closest(".places__item").remove()}function _(){var e=this;i(this,l).querySelector(".places__like-button").addEventListener("click",o(this,y,g).bind(this)),i(this,l).querySelector(".places__delete-button").addEventListener("click",o(this,v,k).bind(this)),i(this,l).querySelector(".places__image").addEventListener("click",(function(){i(e,h).call(e,i(e,s),i(e,p))}))}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){j(e,t),t.set(e,n)}function j(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function O(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,T(e,t,"get"))}function P(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,T(e,t,"set"),n),n}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var W=new WeakMap,C=new WeakMap,L=new WeakMap,M=new WeakSet,q=function(){function e(t,n){var r,o=t.items,i=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,r=M),r.add(this),E(this,W,{writable:!0,value:void 0}),E(this,C,{writable:!0,value:void 0}),E(this,L,{writable:!0,value:void 0}),P(this,W,o),P(this,C,i),P(this,L,n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n})(this,M,x).call(this),O(this,W).forEach((function(t){return O(e,C).call(e,t)}))}},{key:"addItem",value:function(e){O(this,L).prepend(e)}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(){O(this,L).innerHTML=""}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function A(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,z(e,t,"get"))}function z(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var B=new WeakMap,V=new WeakMap,D=function(){function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),I(this,B,{writable:!0,value:void 0}),I(this,V,{writable:!0,value:function(e){"Escape"===e.key&&i.closePopup(A(i,B).querySelector(".popup_opened"))}}),n=this,r=B,o=document.querySelector(t),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(n,z(n,r,"set"),o)}var t,n;return t=e,(n=[{key:"openPopup",value:function(){A(this,B).classList.add("popup_opened"),document.addEventListener("keydown",A(this,V))}},{key:"closePopup",value:function(){A(this,B)&&(A(this,B).classList.remove("popup_opened"),document.removeEventListener("keydown",this.handleEscClosePopup))}},{key:"setEventListeners",value:function(){var e=this;A(this,B).addEventListener("mousedown",(function(t){(t.target.classList.contains("popup__modal-window")||t.target.classList.contains("popup_opened"))&&e.closePopup(A(e,B)),t.target.classList.contains("popup__close-button")&&e.closePopup(A(e,B))}))}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=H(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function G(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return K=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},K(e)}function Q(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,X(e,t,"get"))}function X(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Y=new WeakMap,Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(r);if(o){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return G(this,e)});function a(e,t){var n,r,o,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r=J(n=i.call(this,e)),u={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r,o=Y),o.set(r,u),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,X(e,t,"set"),n)}(J(n),Y,document.querySelector(t)),n}return t=a,(n=[{key:"openPopup",value:function(e,t){N(K(a.prototype),"openPopup",this).call(this),Q(this,Y).src=t,Q(this,Y).alt=e,document.querySelector(".popup__image-caption").textContent=e}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(D);function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(){return re="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=oe(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},re.apply(this,arguments)}function oe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e,t){if(t&&("object"===ee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ue(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t,n){pe(e,t),t.set(e,n)}function pe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,de(e,t,"get"))}function he(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,de(e,t,"set"),n),n}function de(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ye=new WeakMap,ve=new WeakMap,we=new WeakMap,be=new WeakMap,me=new WeakSet,ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ce(r);if(o){var n=ce(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ae(this,e)});function a(e,t){var n,r,o,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),pe(r=ue(n=i.call(this,e)),o=me),o.add(r),se(ue(n),ye,{writable:!0,value:void 0}),se(ue(n),ve,{writable:!0,value:void 0}),se(ue(n),we,{writable:!0,value:void 0}),se(ue(n),be,{writable:!0,value:void 0}),le(ue(n),"data",void 0),le(ue(n),"handleInputs",void 0),he(ue(n),ye,t),he(ue(n),we,document.querySelector(e)),he(ue(n),be,fe(ue(n),we).querySelector(".popup__form")),he(ue(n),ve,function(e){if(Array.isArray(e))return te(e)}(u=fe(ue(n),be).querySelectorAll(".popup__input"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(u)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n}return t=a,(n=[{key:"setInputValues",value:function(e){fe(this,ve).forEach((function(t){e[t.name]&&(t.value=e[t.name])}))}},{key:"getForm",value:function(){return fe(this,be)}},{key:"setEventListeners",value:function(){var e=this;fe(this,be).addEventListener("submit",(function(t){t.preventDefault(),fe(e,ye).call(e,function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(e,me,ke).call(e)),e.closePopup()})),re(ce(a.prototype),"setEventListeners",this).call(this)}},{key:"closePopup",value:function(){fe(this,be).reset(),re(ce(a.prototype),"closePopup",this).call(this)}}])&&ne(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(D);function ke(){return fe(this,ve).reduce((function(e,t){return e[t.name]=t.value,e}),{})}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ee(e,t,"get"))}function Ee(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var je=new WeakMap,Oe=function(){function e(t){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,r=je),r.set(n,o),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,Ee(e,t,"set"),n)}(this,je,t),this.nameSelector=document.querySelector(Se(this,je).userName),this.infoSelector=document.querySelector(Se(this,je).userInfo)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this.nameSelector.textContent,job:this.infoSelector.textContent}}},{key:"setUserInfo",value:function(e,t){this.nameSelector.textContent=e,this.infoSelector.textContent=t}}])&&_e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){Ce(e,t),t.add(e)}function We(e,t,n){Ce(e,t),t.set(e,n)}function Ce(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Le(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Me(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,xe(e,t,"get"))}function qe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,xe(e,t,"set"),n),n}function xe(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Re=new WeakMap,Ie=new WeakMap,Ae=new WeakMap,ze=new WeakMap,Be=new WeakMap,Ve=new WeakMap,De=new WeakMap,Ue=new WeakSet,Fe=new WeakSet,Ne=new WeakSet,He=new WeakSet,$e=new WeakSet,Ge=new WeakSet,Je=new WeakSet,Ke=new WeakSet,Qe=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,Ke),Te(this,Je),Te(this,Ge),Te(this,$e),Te(this,He),Te(this,Ne),Te(this,Fe),Te(this,Ue),We(this,Re,{writable:!0,value:void 0}),We(this,Ie,{writable:!0,value:void 0}),We(this,Ae,{writable:!0,value:void 0}),We(this,ze,{writable:!0,value:void 0}),We(this,Be,{writable:!0,value:void 0}),We(this,Ve,{writable:!0,value:void 0}),We(this,De,{writable:!0,value:void 0}),qe(this,Re,t.inactiveButtonClass),qe(this,Ie,t.inputErrorClass),qe(this,Ae,t.errorClass),qe(this,De,n),qe(this,Be,Array.from(Me(this,De).querySelectorAll(t.inputSelector))),qe(this,ze,Me(this,De).querySelector(t.submitButtonSelector))}var t,n;return t=e,(n=[{key:"resetValidation",value:function(){var e=this;Le(this,Ue,Xe).call(this),Me(this,Be).forEach((function(t){Le(e,Ge,nt).call(e,t)}))}},{key:"enableValidation",value:function(){Le(this,Ke,ot).call(this)}}])&&Pe(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xe(){Me(this,ze).classList.add(Me(this,Re)),Me(this,ze).setAttribute("disabled",!0)}function Ye(){Me(this,ze).classList.remove(Me(this,Re)),Me(this,ze).removeAttribute("disabled",!1)}function Ze(){return Me(this,Be).some((function(e){return!e.validity.valid}))}function et(){Le(this,Ne,Ze).call(this)?Le(this,Ue,Xe).call(this):Le(this,Fe,Ye).call(this)}function tt(e,t){qe(this,Ve,Me(this,De).querySelector("#".concat(e.id,"-error"))),e.classList.add(Me(this,Ie)),Me(this,Ve).textContent=t,Me(this,Ve).classList.add(Me(this,Ae))}function nt(e){qe(this,Ve,Me(this,De).querySelector("#".concat(e.id,"-error"))),e.classList.remove(Me(this,Ie)),Me(this,Ve).textContent="",Me(this,Ve).classList.remove(Me(this,Ae))}function rt(e){e.validity.valid?Le(this,Ge,nt).call(this,e):Le(this,$e,tt).call(this,e,e.validationMessage)}function ot(){var e=this;Le(this,He,et).call(this,Me(this,Be)),Me(this,Be).forEach((function(t){t.addEventListener("input",(function(){Le(e,Je,rt).call(e,t),Le(e,He,et).call(e,Me(e,Be))}))}))}var it={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},at=(document.querySelector("#cardtemplate"),document.querySelector(".places__items")),ut=function(e){return new b({name:e.name,link:e.link},"#cardtemplate",(function(e,t){st.openPopup(e,t)})).generateCard()},ct=new q({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){return ct.addItem(ut(e))}},at),lt=function(e){return new Qe(it,e)},st=new Z(".popup_type_image",".popup__image"),pt=new Oe({userName:".profile__title",userInfo:".profile__subtitle"}),ft=new ge(".popup_type_add",(function(e){ct.addItem(ut(e))})),ht=new ge(".popup_type_edit",(function(e){pt.setUserInfo(e.name,e.job)})),dt=lt(ft.getForm()),yt=lt(ht.getForm());dt.enableValidation(),yt.enableValidation(),ct.renderItems(),st.setEventListeners(),ft.setEventListeners(),ht.setEventListeners(),document.querySelector(".profile__add-button").addEventListener("click",(function(){ft.openPopup(),dt.resetValidation()})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){ht.openPopup(),ht.setInputValues(pt.getUserInfo()),yt.resetValidation()}))})();